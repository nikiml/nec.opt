var chartViewer=function(w,y,d){var J="replace",f="length",u="split",b="indexOf",r="substr",B=Math.floor,a=Math.ceil,A=Math.max,x=Math.min,K=Math.round,h="concat",j="push",v=(w||getClientWidth()),q=(y||getClientHeight()),I=function(g){throw g},p=function(N){var O=N[u](","),s,e=[],P;for(s=0;s!=O[f];++s){P=Number(O[s]);if(isNaN(P)){I("Invalid geometry token "+O[s])}e.push(P)}return e},F=function(O){var N=[".html#",".html?",/%26/g,"&",/%23/g,"",/%22/g,"",/%27/g,"",/%20/g," ",/%5B;/g,"[",/%5D;/g,"]",/&#38;/g,"&",/&#35;/g,"",/&#39;/g,"",/&#34;/g,"",/&#32;/g," ",/&#91;/g,"[",/&#93;/g,"]",/"/g,"",/'/g,"",/#/g,"",/"/g,"",/&quot;/g,"",/&amp;/g,"&",/\[/g,"",/\]/g,""],e=N[f],g;for(g=0;g!=e;g+=2){O=O[J](N[g],N[g+1])}return O},l=d||F(decodeURI(window.location.toString())),t=l[u](/[?&]/),M="Net gain and SWR",n,E,z,k=function(g,e){return{f:g,t:e,mt:[],g:[],s:[]}},D=function(g){var N=[],e;for(e=0;e!=g[2];++e){N.push(g[0]+e*g[1])}return N},C=[],m=function(){if(!C[f]){I("sweep or freqs needed before swr")}},c=function(g,e){var N=0,s;for(s=0;s!=g[f];++s){N+=g[s]}return K(100*N/g[f])/100+e},o=function(g){if(!g.g.length){I("Gain not found")}if(g.s[f]&&g.g[f]!=g.s[f]){I("Gain/SWR length mismatch")}if(g.mt[f]&&g.g[f]!=g.mt[f]){I("Gain/Titles length mismatch")}for(var e=0;e!=g.g[f];++e){if(g.g[e][f]!=g.f[f]){I("Gain/Frequences length mismatch")}if(g.s[f]&&g.s[e][f]&&g.s[e][f]!=g.f[f]){I("SWR/Frequences length mismatch")}}},L=function(Q,e,S,N){o(Q);var R=x.apply(null,Q.g[0]),O=A.apply(null,Q.g[0]),g=Q.s[f]?a(A.apply(A,Q.s[0])):1,s,T=[(Q.mt[f]?[Q.mt[0][0]+" gain - ave "+c(Q.g[0],"dBi"),Q.mt[0][1]]:["Gain - ave "+c(Q.g[0],"dBi"),"#000"])[h](Q.g[0])],P=[(Q.mt[f]?[Q.mt[0][0]+" swr - ave "+c(Q.s[0],0),Q.mt[0][2]]:["SWR - ave "+c(Q.s[0],0),"#888"])[h](Q.s[0])];for(s=1;s!=Q.g[f];++s){R=x(R,x.apply(null,Q.g[s]));O=A(O,A.apply(null,Q.g[s]));if(Q.s[f]&&Q.s[s][f]){g=A(g,A.apply(null,Q.s[s]));P.push((Q.mt[f]&&Q.mt[s][f]?[Q.mt[s][0]+" swr - ave "+c(Q.s[s],0),Q.mt[s][2]]:["SWR - ave "+c(Q.s[s],0),"#888"])[h](Q.s[s]))}T.push((Q.mt[f]&&Q.mt[s][f]?[Q.mt[s][0]+" gain - ave "+c(Q.g[s],"dBi"),Q.mt[s][1]]:["Gain - ave "+c(Q.g[s],"dBi"),"#000"])[h](Q.g[s]))}R=B(R);O=a(O);g=a(g);R=R-4-2*(g-1);g=1+(O-R)/2;gainSwrChart(e,S,N,Q.f,T,P,K(R),K(O),K(g*10)/10,Q.t)},G=function(s,S){var T=document,O="createElement",g="style",N="setAttribute",Q="appendChild",e=T.getElementById(s),V=T[O]("table"),U,P,R;e[Q](V);V[g].height=V[g].width="100%";for(R=0;R!=S;++R){U=T[O]("tr");V[Q](U);P=T[O]("td");U[Q](P);e=T[O]("div");P[Q](e);e[N]("id",s+R)}};for(z=1;z<t[f];++z){n=t[z][b]("mtitle=");if(n!=-1){n=t[z][r](n+7)[u](",");if(n[f]<3){continue}m();E=n[1].match(/[0-9,a-f,A-F]{6}|[0-9,a-f,A-F]{3}/);if(E&&n[1]==E[0]){n[1]="#"+E[0]}else{n[1]=colorNameToHex(n[1])||"#000"}E=n[2].match(/[0-9,a-f,A-F]{6}|[0-9,a-f,A-F]{3}/);if(E&&n[2]==E[0]){n[2]="#"+E[0]}else{n[2]=colorNameToHex(n[2])||"#000"}C[C[f]-1].mt.push(n);continue}n=t[z][b]("title=");if(n!=-1){M=t[z][r](n+6);continue}t[z]=t[z][J](/ /g,"");n=t[z][b]("sweep=");if(n!=-1){E=t[z][r](n+6);try{C[j](k(D(p(E)),M))}catch(H){I(H+" in "+t[z])}continue}n=t[z][b]("freqs=");if(n!=-1){E=t[z][r](n+6);try{C[j](k(p(E),M))}catch(H){I(H+" in "+t[z])}continue}n=t[z][b]("gain=");if(n!=-1){m();E=t[z][r](n+5);try{C[C[f]-1].g[j](p(E))}catch(H){I(H+" in "+t[z])}continue}n=t[z][b]("swr=");if(n!=-1){m();E=t[z][r](n+4);try{C[C[f]-1].s[j](p(E))}catch(H){I(H+" in "+t[z])}continue}}q/=C[f];if(C[f]>1){G("chart",C[f]);for(z=0;z!=C[f];++z){L(C[z],"chart"+z,v-30,q-30)}}else{L(C[0],"chart",v-30,q-30)}};