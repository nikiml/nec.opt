function getClientWidth(){return"CSS1Compat"!==document.compatMode||window.opera?document.body.clientWidth:document.documentElement.clientWidth}function getClientHeight(){return"CSS1Compat"!==document.compatMode||window.opera?document.body.clientHeight:document.documentElement.clientHeight}function getInternetExplorerVersion(){if("Microsoft Internet Explorer"===navigator.appName){var t=navigator.userAgent,e=RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})")
if(null!==e.exec(t))return parseFloat(RegExp.$1)}return-1}function r_line(t,e,r,n,i){return t.path("M"+e+" "+r+"L"+n+" "+i)}function radians(t){return Math.PI*t/180}function degrees(t){return t/Math.PI*180}function fontSize(t){return{"font-size":t}}function fontWeight(t){return{"font-weight":t}}Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length,r=+arguments[1]||0
for(r=0>r?Math.ceil(r):Math.floor(r),0>r&&(r+=e);e>r;r++)if(r in this&&this[r]===t)return r
return-1}),Array.prototype.maxIndex||(Array.prototype.maxIndex=function(){if(!this.length)return-1
for(var t=0,e=this.length,r=1;e>r;++r)this[t]<this[r]&&(t=r)
return t}),Array.prototype.minIndex||(Array.prototype.minIndex=function(){if(!this.length)return-1
for(var t=0,e=this.length,r=1;e>r;++r)this[t]>this[r]&&(t=r)
return t}),Array.prototype.maxValue||(Array.prototype.maxValue=function(){return this.length?this[this.maxIndex()]:void 0}),Array.prototype.minValue||(Array.prototype.minValue=function(){return this.length?this[this.minIndex()]:void 0})
var antennaGeometry=function(t,e,r,n,i,o,s,a,l){var h,c=Raphael(t,e,r),u=void 0,f=Math.min,d=Math.max,p=Matrix.RotationX(radians(15)).x(Matrix.RotationY(radians(-60)).x($M([[0,1,0],[0,0,1],[1,0,0]]))),x=o?o:0,g=s?s:0,m=u,k=a?14:0,v=0,y=0,M=-1!==getInternetExplorerVersion(),b="#fff",w="#f8f8f8",z=1,_=2,$=function(t){return Math.round(1e3*t)+"mm"},C=function(t){return Math.round(1e4*t)/10},V=function(t){return Math.round(1e4*t)/10+"mm"},B=function(t){return t%2?[t,16]:(t/=2,t%2?[t,8]:(t/=2,t%2?[t,4]:(t/=2,[t,2])))},W=function(t){var e,r,n=0>t?-Math.round(t/.0015875):Math.round(t/.0015875)
return n%16!==0?(e=Math.abs(n%16),r=B(e),(0>t?"-":"")+Math.round(n/16-.5)+" "+r[0]+"/"+r[1]+" in"):(0>t?"-":"")+Math.round(n/16-.5)+"in"},S=function(t){var e,r,n=0>t?-Math.round(t/.0015875):Math.round(t/.0015875)
return n%16!==0?(e=Math.abs(n%16),r=B(e),(0>t?"-":"")+Math.round(n/16-.5)+" "+r[0]+"/"+r[1]):(0>t?"-":"")+Math.round(n/16-.5)},I=function(t){var e,r,n,i,o,s,a,l=0,h=[]
for(l=0;l!==t.length;l++)for(e=t[l][0],r=t[l].slice(1),r.length%6!==0&&alert("Invalid geometry array - length="+r.length),n=0;n!==r.length;n+=6)i=$V(r.slice(n,n+3)),o=$V(r.slice(n+3,n+6)),s=i.subtract(o),a=s.modulus(),h.push({color:e,pts:[i,o],selected:0,sselected:0,eselected:0,len:a,names:[[$(a),C(i.e(1))+","+C(i.e(2))+","+C(i.e(3)),C(o.e(1))+","+C(o.e(2))+","+C(o.e(3))],[W(a),S(i.e(1))+","+S(i.e(2))+","+S(i.e(3)),S(o.e(1))+","+S(o.e(2))+","+S(o.e(3))]]})
return h},L=function(t,e){var r,n,i,o,s,a=[]
for(r=0;r!=t.length;++r)n=t[r],i=n.pts[0].x(e),o=n.pts[1].x(e),s=n.len*e,a.push({color:n.color,pts:[i,o],selected:0,sselected:0,eselected:0,len:s,names:[[$(s),C(i.e(1))+","+C(i.e(2))+","+C(i.e(3)),C(o.e(1))+","+C(o.e(2))+","+C(o.e(3))],[W(s),S(i.e(1))+","+S(i.e(2))+","+S(i.e(3)),S(o.e(1))+","+S(o.e(2))+","+S(o.e(3))]]})
return a},A=I(i),H=[],E=-1,T=[],F=$V([e/2+x,(r+k)/2+g,0]),O=$V([0,0,0]),R=this,j=$M([[1,0,0],[0,-1,0],[0,0,1]]),N=j.x(p),P=function(t,i,o){if(0!==t||0!==i){if(0===v==!o)F=F.add($V([t,-i,0]))
else{var s,a=0
if("z"==m?(a=-i,t=0,i=0):"y"==m?t=0:"x"==m&&(i=0),0===t&&0===i&&0===a)return
s=Math.sqrt(t*t+i*i+a*a)*Math.PI/f(e,r),rot=Matrix.Rotation(s,$V([-i,t,a]).toUnitVector()),s=p.x(O).x(n),F=F.add(j.x(s).subtract(j.x(rot.x(s)))),p=rot.x(p)}R.redraw()}},q=function(t){var e=N.x(O)
F=F.add(e.x(n).subtract(e.x(n*t))),n*=t,R.redraw()},X=c.set(),Y=c.set(),Z=null,D=null,G=null,J="#b00",Q="#0b0",U="#00b",K="#ccc",te="none",ee="#8ff",re=function(){var t=N.x(Vector.Zero(3)).x(30).add(F),e=N.x(Vector.i).x(30).add(F),r=t.e(1),n=t.e(2),i=e.e(1),o=e.e(2)
Y.push(r_line(c,r,n,i,o).attr({stroke:J,stroke_width:1})),i=r+1.25*(i-r),o=n+1.25*(o-n),Y.push(c.text(i,o,"X").attr({stroke:J,stroke_width:1})),e=N.x(Vector.j).x(30).add(F),i=e.e(1),o=e.e(2),Y.push(r_line(c,r,n,i,o).attr({stroke:Q,stroke_width:1})),i=r+1.25*(i-r),o=n+1.25*(o-n),Y.push(c.text(i,o,"Y").attr({stroke:Q,stroke_width:1})),e=N.x(Vector.k).x(30).add(F),i=e.e(1),o=e.e(2),Y.push(r_line(c,r,n,i,o).attr({stroke:U,stroke_width:1})),i=r+1.25*(i-r),o=n+1.25*(o-n),Y.push(c.text(i,o,"Z").attr({stroke:U,stroke_width:1}))},ne=function(){E=this.i,pe(),null!=Z&&Z.remove(),R.redraw(),se(),de()},ie=function(t,e,r,n,i,o){var s=c.set(),a=c.rect(1,1,e,r+2,2),l=c.text(e/2,r/2+1,t).attr(fontSize(r))
return a.attr({fill:i&&i()?ee:o,stroke:te}),a.click(function(){n(),a.attr({fill:i&&i()?ee:o})}),a.mouseover(function(){this.attr({fill:K})}),a.mouseout(function(){this.attr({fill:i&&i()?ee:o})}),l.click(function(){n(),a.attr({fill:i&&i()?ee:o})}),l.mouseover(function(){a.attr({fill:K}),this.attr(fontWeight("bold"))}),l.mouseout(function(){a.attr({fill:i&&i()?ee:o}),this.attr(fontWeight("normal"))}),s.push(a),s.push(l),s.rect=a,s},oe=function(){G=ie("Help",30,11,function(){window.open("http://clients.teksavvy.com/~nickm/help.html")},0,w),G.translate(e-30,0)},se=function(){if(H.length){var t,r,n,i,o=l.length
for(t=0;t!==H.length;++t)o+=H[t][0].length
for(null==Z&&(Z=c.set()),i=f((e-20)/(o+H.length+1),8),start=(e-i*o)/2-30,Z.push(c.text(start+l.length*i/2,k/2,l).attr(fontSize(11))),start+=(1+l.length)*i,t=0;t!==H.length;++t)t===E?Z.push(c.rect(start,1,H[t][0].length*i,k-2).attr({fill:ee,stroke:te})):(n=c.rect(start,1,H[t][0].length*i,k-2),n.attr({fill:w,stroke:te}),n.mouseover(function(){this.attr({fill:K})}),n.mouseout(function(){this.attr({fill:gbcolor})}),n.click(ne),n.i=t,Z.push(n)),r=c.text(start+H[t][0].length*i/2,k/2,H[t][0]).attr(fontSize(11)),Z.push(r),t!==E&&(r.i=t,r.click(ne),r.rect=n,r.mouseover(function(){this.rect.attr({fill:K}),this.attr(fontWeight("bold"))}),r.mouseout(function(){this.rect.attr({fill:b}),this.attr(fontWeight("normal"))})),start+=(1+H[t][0].length)*i}},ae=function(t,e){return Math.atan2(t.cross(e).modulus(),t.dot(e))},le=function(t,e){var r=[t.pts[0].subtract(e.pts[0]).modulus(),t.pts[0].subtract(e.pts[1]).modulus(),t.pts[1].subtract(e.pts[0]).modulus(),t.pts[1].subtract(e.pts[1]).modulus()]
return mini=r.minIndex(),ang=0,0==mini&&(ang=ae(t.pts[1].subtract(t.pts[0]),e.pts[1].subtract(e.pts[0]))),1==mini&&(ang=ae(t.pts[1].subtract(t.pts[0]),e.pts[0].subtract(e.pts[1]))),2==mini&&(ang=ae(t.pts[0].subtract(t.pts[1]),e.pts[1].subtract(e.pts[0]))),3==mini&&(ang=ae(t.pts[0].subtract(t.pts[1]),e.pts[0].subtract(e.pts[1]))),Math.round(10*degrees(ang))/10+"\xb0"},he=[],ce=0,ue=[$V([1e8,1e8,1e8]),$V([-1e8,-1e8,-1e8])],fe=function(){var t=ue[1].subtract(ue[0]),i=f((e-40)/d(1,t.e(1)),(r-80)/d(1,t.e(2))),o=ue[1].add(ue[0]).x(.5)
O=N.inv().x(o.subtract(F).x(1/n)),n*=i,F=$V([e/2,r/2,0]).subtract(o.subtract(F).x(i))},de=function(){var t,r,n,i,o,s,a=y?W:V,l=0,h=[],u=[],f=[],d=[],p=[],x="",g=0
if(!he.length)return D=c.text(e/2-20,k+7,"Select elements for info. Double click to clear. Total len: "+a(ce)).attr(fontSize(11)),void 0
for(t=0;t!==he.length;++t)r=he[t],n=r[0],i=r[1],o=r[2],s=T[n][i],0===o?(u.push(s),h.push(s.pts[0]),h.push(s.pts[1]),l+=s.len):h.push(s.pts[o-1])
for(t=0;t!==h.length;++t)-1===f.indexOf(h[t].e(1))&&f.push(h[t].e(1)),-1===d.indexOf(h[t].e(2))&&d.push(h[t].e(2)),-1===p.indexOf(h[t].e(3))&&p.push(h[t].e(3))
1===f.length?(x+=" x: "+a(f[0]),++g):2===f.length&&(x+=" \u0394x: "+a(Math.abs(f[0]-f[1])),++g),1===d.length?(x+=" y: "+a(d[0]),++g):2===d.length&&(x+=" \u0394y: "+a(Math.abs(d[0]-d[1])),++g),1===p.length?(x+=" z: "+a(p[0]),++g):2===p.length&&(x+=" \u0394z: "+a(Math.abs(p[0]-p[1])),++g),2==u.length&&3>g&&(x+=" \u2221"+le(u[0],u[1]),++g),l>0&&(x+=" Total len: "+a(l),++g),D=c.text(e/2-20,k+7,"Selection info ("+he.length+"): "+x).attr(fontSize(11))},pe=function(){var t,e,r
for(he=[],D.remove(),t=0;t!==T.length;++t)for(r=T[t],e=0;e!==r.length;++e)r[e].selected=0,r[e].sselected=0,r[e].eselected=0},xe=function(){X.remove(),X.push(c.g.popup(this.x,this.y,this.value,null,3))},ge=function(){X.remove()},me=function(){var t=this.si
T[t[0]][t[1]].selected=!T[t[0]][t[1]].selected,D.remove(),R.redraw(),de()},ke=function(){var t=this.si
T[t[0]][t[1]].sselected=!T[t[0]][t[1]].sselected,D.remove(),R.redraw(),de()},ve=function(){var t=this.si
T[t[0]][t[1]].eselected=!T[t[0]][t[1]].eselected,D.remove(),R.redraw(),de()},ye=function(t,e,r,n,i,o){var s=function(t,e){var r={},n={}
return(t==u?n:r).fill=t,(e==u?n:r).stroke=e,r}
return e=e||t,e==t&&(e.attr({fill:n,stroke:o}),e.fillin=r,e.fillout=n,e.strokein=i,e.strokeout=o),t.hover(function(){e.attr(s(e.fillin,e.strokein))},function(){e.attr(s(e.fillout,e.strokeout))}),t},Me=function(){v=v?0:1
var t=this.btn||this
t.fillout=v?ee:w,t.attr({fill:t.fillout}),R.redraw()},be=function(){var t,n,i,o,s,a="#888",l="#ccc",h="#000",f="none",d={fill:b,"stroke-dasharray":"-","stroke-width":1},x={fill:b,"stroke-width":2,"fill-opacity":.75},g={fill:b,"stroke-width":.5,"stroke-dasharray":"-"},m={fill:"none","stroke-width":2,"fill-opacity":.5}
s=ie("mm",20,13,function(){o.rect.attr({fill:w}),y=0,D.remove(),de()},function(){return!y},w),s.translate(0,r-40),o=ie("in",20,13,function(){s.rect.attr({fill:w}),y=1,D.remove(),de()},function(){return y},w),o.translate(0,r-20),i=c.set(),i.push(c.path("M0,3l15,-3l9,5l-15,3z").attr(x)),i.push(c.path("M0,3l9,5v16l-9,-5z").attr(x)),i.push(c.path("M9,8v16l15,-3v-16z").attr(x)),ye(i,u,a,b).click(function(){p=Matrix.RotationX(radians(15)).x(Matrix.RotationY(radians(-60)).x($M([[0,1,0],[0,0,1],[1,0,0]]))),R.redraw()}),i.translate(e-206,r-28).attr({stroke:"#000","stroke-linejoin":"round"}),i=c.set(),i.push(c.path("M0,24l8,-8v-16m0,16h16").attr(d)),i.push(ye(c.path("M0,8v16h16v-16z").attr(x),u,a,b).click(function(){p=$M([[0,1,0],[0,0,1],[1,0,0]]),R.redraw()})),i.push(ye(c.path("M0,8h16l8,-8h-16z").attr(x),u,a,b).click(function(){p=$M([[0,1,0],[-1,0,0],[0,0,1]]),R.redraw()})),i.push(ye(c.path("M16,8v16l8,-8v-16z").attr(x),u,a,b).click(function(){p=$M([[-1,0,0],[0,0,1],[0,1,0]]),R.redraw()})),i.translate(e-178,r-28).attr({stroke:"#000","stroke-linejoin":"round"}),i=c.set(),i.push(ye(c.path("M0,8v16l8,-8v-16z").attr(g),u,l,b).click(function(){p=$M([[1,0,0],[0,0,1],[0,-1,0]]),R.redraw()})),i.push(ye(c.path("M0,24h16l8,-8h-16z").attr(g),u,l,b).click(function(){p=$M([[0,1,0],[1,0,0],[0,0,-1]]),R.redraw()})),i.push(ye(c.path("M8,0h16v16h-16z").attr(g),u,l,b).click(function(){p=$M([[0,-1,0],[0,0,1],[-1,0,0]]),R.redraw()})),i.push(c.path("M0,8v16h16v-16z").attr(m)),i.push(c.path("M0,8h16l8,-8h-16z").attr(m)),i.push(c.path("M16,8v16l8,-8v-16z").attr(m)),i.translate(e-150,r-28).attr({stroke:"#000","stroke-linejoin":"round"}),t=c.circle(e-122+16,r-15,14).click(function(){q(1.1)}),ye(t,t,K,w,f,f),n=c.path("M22.646,19.307c0.96-1.583,1.523-3.435,1.524-5.421C24.169,8.093,19.478,3.401,13.688,3.399C7.897,3.401,3.204,8.093,3.204,13.885c0,5.789,4.693,10.481,10.484,10.481c1.987,0,3.839-0.563,5.422-1.523l7.128,7.127l3.535-3.537L22.646,19.307zM13.688,20.369c-3.582-0.008-6.478-2.904-6.484-6.484c0.006-3.582,2.903-6.478,6.484-6.486c3.579,0.008,6.478,2.904,6.484,6.486C20.165,17.465,17.267,20.361,13.688,20.369zM15.687,9.051h-4v2.833H8.854v4.001h2.833v2.833h4v-2.834h2.832v-3.999h-2.833V9.051z").attr({fill:h,stroke:f}).translate(e-122,r-30).click(function(){q(1.1)}),ye(n,t),t=c.circle(e-93+16,r-15,14).click(function(){q(1/1.1)}),n=c.path("M22.646,19.307c0.96-1.583,1.523-3.435,1.524-5.421C24.169,8.093,19.478,3.401,13.688,3.399C7.897,3.401,3.204,8.093,3.204,13.885c0,5.789,4.693,10.481,10.484,10.481c1.987,0,3.839-0.563,5.422-1.523l7.128,7.127l3.535-3.537L22.646,19.307zM13.688,20.369c-3.582-0.008-6.478-2.904-6.484-6.484c0.006-3.582,2.903-6.478,6.484-6.486c3.579,0.008,6.478,2.904,6.484,6.486C20.165,17.465,17.267,20.361,13.688,20.369zM8.854,11.884v4.001l9.665-0.001v-3.999L8.854,11.884z").attr({fill:h,stroke:f}).translate(e-93,r-30).click(function(){q(1/1.1)}),ye(t,t,K,w,f,f),ye(n,t),rotate_btn=c.set(),t=c.circle(16,16,14),ye(t,t,K,w,h,h),rotate_btn.push(t),t.click(Me),n=c.path("M15.999,4.308c1.229,0.001,2.403,0.214,3.515,0.57L18.634,6.4h6.247l-1.562-2.706L21.758,0.99l-0.822,1.425c-1.54-0.563-3.2-0.878-4.936-0.878c-7.991,0-14.468,6.477-14.468,14.468c0,3.317,1.128,6.364,3.005,8.805l2.2-1.689c-1.518-1.973-2.431-4.435-2.436-7.115C4.312,9.545,9.539,4.318,15.999,4.308zM27.463,7.203l-2.2,1.69c1.518,1.972,2.431,4.433,2.435,7.114c-0.011,6.46-5.238,11.687-11.698,11.698c-1.145-0.002-2.24-0.188-3.284-0.499l0.828-1.432H7.297l1.561,2.704l1.562,2.707l0.871-1.511c1.477,0.514,3.058,0.801,4.709,0.802c7.992-0.002,14.468-6.479,14.47-14.47C30.468,12.689,29.339,9.643,27.463,7.203z").attr({fill:"#000"}).scale(.75),rotate_btn.push(n),n.btn=t,n.click(Me),ye(n,t),rotate_btn.translate(e-32,r-32),fit_btn=c.set(),t=c.circle(15.5,15.5,14),ye(t,t,K,w,h,h),fit_btn.push(t),fit_btn.push(n=c.path("M25.545,23.328,17.918,15.623,25.534,8.007,27.391,9.864,29.649,1.436,21.222,3.694,23.058,5.53,15.455,13.134,7.942,5.543,9.809,3.696,1.393,1.394,3.608,9.833,5.456,8.005,12.98,15.608,5.465,23.123,3.609,21.268,1.351,29.695,9.779,27.438,7.941,25.6,15.443,18.098,23.057,25.791,21.19,27.638,29.606,29.939,27.393,21.5z").attr({fill:"#000",stroke:"#000"}).scale(5/8)),ye(n,t),fit_btn.translate(e-64,r-32).click(function(){fe(),R.redraw()}),i=c.set(),t=c.rect(1,1,30,11).attr({stroke:f}).click(function(){z=5,R.redraw()}),ye(t,t,K,w),n=r_line(c,3,6,29,6).attr({stroke:h,"stroke-width":5}).click(function(){z=5,R.redraw()}),ye(n,t,K,w),i.push(n),i.push(t),t=c.rect(1,12,30,11).attr({stroke:f}).click(function(){z=3,R.redraw()}),ye(t,t,K,w),n=r_line(c,3,18,29,18).attr({stroke:h,"stroke-width":3}).click(function(){z=3,R.redraw()}),ye(n,t,K,w),i.push(n),i.push(t),t=c.rect(1,23,30,11).attr({stroke:f}).click(function(){z=1,R.redraw()}),ye(t,t,K,w),n=r_line(c,3,29,29,29).attr({stroke:h,"stroke-width":1}).click(function(){z=1,R.redraw()}),ye(n,t,K,w),i.push(n),i.push(t),t=c.circle(40,7,6).attr({stroke:f}).click(function(){_=4,R.redraw()}),ye(t,t,K,w),n=c.circle(40,7,4).attr({fill:h}).click(function(){_=4,R.redraw()}),ye(n,t,K,w),i.push(n),i.push(t),t=c.circle(40,18,6).attr({stroke:f}).click(function(){_=3,R.redraw()}),ye(t,t,K,w),n=c.circle(40,18,3).attr({fill:h}).click(function(){_=3,R.redraw()}),ye(n,t,K,w),i.push(n),i.push(t),t=c.circle(40,29,6).attr({stroke:f}).click(function(){_=2,R.redraw()}),ye(t,t,K,w),n=c.circle(40,29,2).attr({fill:h}).click(function(){_=2,R.redraw()}),ye(n,t,K,w),i.push(n),i.push(t),i.translate(30,r-40)},we=function(t,e){return $V([f(t.e(1),e.e(1)),f(t.e(2),e.e(2)),f(t.e(3),e.e(3))])},ze=function(t,e){return $V([d(t.e(1),e.e(1)),d(t.e(2),e.e(2)),d(t.e(3),e.e(3))])},_e=0,$e=function(t,e){return t.z-e.z},Ce=function(t,e,r,n,i,o,s){var a,l,h=c.rect(t,e,r,n,i).attr({fill:s,stroke:"none"})
h.drag(function(t,e){var r=t-a,n=-e+l
a=t,l=e,P(r,n,h.mb)},function(t,e,r){m=o,a=0,l=0,h.mb=void 0==r.which?4==r.button:2==r.which,_e=1},function(){_e=0,R.redraw()}),h.dblclick(function(){pe(),R.redraw(),de()})},Ve=function(t){return"[object Array]"===Object.prototype.toString.call(t)}
if(c.g=c.g||c,a)for(E=0,h=0;h!==a.length;++h)Ve(a[h][1])?H.push([a[h][0],I(a[h][1])]):H.push([a[h][0],L(A,a[h][1])])
Ce(1,1,e-2,r-2,10,"3",b),Ce(1,1,e-2,40,10,"x",w),Ce(1,1,40,r-2,10,"z",w),Ce(e-41,1,e-2,r-2,10,"y",w),Ce(1,r-42,e-2,r-2,10,"x",w),be(),oe(),se(),this.redraw=function(){X.remove(),Y.remove()
var t,e,r,i,o,s,l,h,u,d=y?1:0,x=[],g=0,m=c.set(),k=c.set(),v={},w={}
for(ce=0,_e||(he=[]),T=[A],-1!==E&&(Ve(a[E][1])?T.push(H[E][1]):T=[H[E][1]]),ue=[$V([1e8,1e8,1e8]),$V([-1e8,-1e8,-1e8])],N=j.x(p),g=0;g!==T.length;++g)for(e=T[g],t=0;t!==e.length;t++)r=e[t],ce+=r.len,u={z:0,s:N.x(r.pts[0]).x(n).add(F),e:N.x(r.pts[1]).x(n).add(F),sindex:[g,t]},u.z=f(u.s.e(3),u.e.e(3)),x.push(u),ue[0]=we(we(ue[0],u.s),u.e),ue[1]=ze(ze(ue[1],u.s),u.e)
if(_e||x.sort($e),!_e&&!M&&11>z){for(Y.push(m),Y.push(k),g=0;g!==x.length;++g)r=x[g],i="M"+r.s.e(1)+" "+r.s.e(2)+"L"+r.e.e(1)+" "+r.e.e(2),o=r.sindex,s=c.path(i),m.push(s),e=T[o[0]],t=o[1],s.value=e[t].names[d][0],s.x=(r.s.e(1)+r.e.e(1))/2,s.y=(r.s.e(2)+r.e.e(2))/2,s.si=o,s.hover(xe,ge),s.click(me),u=c.circle(r.s.e(1),r.s.e(2),7),k.push(u),u.value=e[t].names[d][1],u.x=r.s.e(1),u.y=r.s.e(2),u.si=o,u.hover(xe,ge),u.click(ke),u=c.circle(r.e.e(1),r.e.e(2),7),k.push(u),u.value=e[t].names[d][2],u.x=r.e.e(1),u.y=r.e.e(2),u.si=o,u.hover(xe,ge),u.click(ve)
m.attr({stroke:b,"stroke-width":11,"fill-opacity":0,"stroke-opacity":0}),k.attr({stroke:b,fill:b,"fill-opacity":0,"stroke-opacity":0})}for(re(),_e&&(r=N.x(O).x(n).add(F),Y.push(c.circle(r.e(1),r.e(2),6).attr({stroke:"#f0f",fill:"#f0f"}))),g=0;g!==x.length;++g)r=x[g],i="M"+r.s.e(1)+" "+r.s.e(2)+"L"+r.e.e(1)+" "+r.e.e(2),o=r.sindex,t=o[1],e=T[o[0]],l=e[t].color,h=e[t].selected?"#f0f":l,s=c.path(i),h in v||(v[h]=c.set(),Y.push(v[h])),v[h].push(s),_e||(s.value=e[t].names[d][0],s.x=(r.s.e(1)+r.e.e(1))/2,s.y=(r.s.e(2)+r.e.e(2))/2,s.si=o,e[t].selected&&he.push([o[0],t,0]),s.hover(xe,ge),s.click(me),h=e[t].sselected?"#f0f":l,u=c.circle(r.s.e(1),r.s.e(2),_),h in w||(w[h]=c.set(),Y.push(w[h])),w[h].push(u),u.value=e[t].names[d][1],u.x=r.s.e(1),u.y=r.s.e(2),u.si=o,e[t].sselected&&he.push([o[0],t,1]),u.hover(xe,ge),u.click(ke),h=e[t].eselected?"#f0f":l,u=c.circle(r.e.e(1),r.e.e(2),_),h in w||(w[h]=c.set(),Y.push(w[h])),w[h].push(u),u.value=e[t].names[d][2],u.x=r.e.e(1),u.y=r.e.e(2),u.si=o,e[t].eselected&&he.push([o[0],t,2]),u.hover(xe,ge),u.click(ve))
for(prop in v)v[prop].attr({stroke:prop,"stroke-width":z})
for(prop in w)w[prop].attr({stroke:prop,fill:prop})},this.redraw(),this.fit=function(){fe()},de()},gainChart=function(t,e,r,n,i,o,s,a,l,h){var c,u,f,d,p,x,g,m,k,v=Raphael(t,e+40,r+40+10*Math.max(i.length,o.length)),y=v.set(),M="#ccc",b="#000",w=function(){y&&y.remove(),y.push(v.g.popup(this.x,this.y,this.value,null,3))},z=function(){y&&y.remove()},_=function(){this.hidden?(this.hidden=0,this.text.attr({fill:b}),this.chart.lines.show(),this.chart.symbols.show(),this.chart.dots.show()):(this.hidden=1,this.text.attr({fill:M}),this.chart.lines.hide(),this.chart.symbols.hide(),this.chart.dots.hide())}
for(h&&v.text(e/2,10,h).attr(fontSize(14)),v.g.txtattr.font="10px 'Fontin Sans', Fontin-Sans, sans-serif",c=i.length;0!==c;)--c,u=i[c][0],f=i[c][1],d=o[c][1],p=i[c].slice(2),p.length&&(x=c?{gutter:10,nostroke:!1,axis:"0 0 0 0",symbol:"o",smooth:!0,axisystep:2*(a-s),axisxstep:n.length-1,axisymin:s,axisymax:a,dash:""}:{gutter:10,nostroke:!1,axis:"0 0 1 1",symbol:"o",smooth:!0,axisystep:2*(a-s),axisxstep:n.length-1,axisymin:s,axisymax:a,grid:"5 2",dash:""},p.length>n.length&&(p=p.slice(0,n.length)),g=v.g.linechart(20,20,e,r,[n],[p],x).hover(w,z),g.symbols.attr({r:2}),g.lines.attr({stroke:f}),g.symbols.attr({stroke:f}),g.symbols.attr({fill:f}),g.grid.attr({"stroke-width":.25}),k=v.rect(20,r+31+10*c,20,8).attr({stroke:"none",fill:f}),k.chart=g,k.hidden=0,k.color=f,k.altcolor=d,k.mouseover(function(){this.attr({fill:this.altcolor}),this.text.attr(fontWeight("bold"))}),k.mouseout(function(){this.attr({fill:this.color}),this.text.attr(fontWeight("normal"))}),k.text=v.text(44,r+35+10*c,u).attr({"text-anchor":"start"}),k.text.rect=k,k.text.mouseover(function(){this.rect.attr({fill:this.rect.altcolor}),this.attr(fontWeight("bold"))}),k.text.mouseout(function(){this.rect.attr({fill:this.rect.color}),this.attr(fontWeight("normal"))}),k.text.text=k.text,k.text.chart=k.chart,k.click(_),k.text.click(_))
for(c=o.length;0!==c;)--c,u=o[c][0],f=o[c][1],d=i[c][1],p=o[c].slice(2),p.length&&(x=c?{gutter:10,nostroke:!1,axis:"0 0 0 0",symbol:"o",smooth:!0,axisystep:2*(l-1),axisxstep:n.length-1,axisymin:1,axisymax:l,dash:""}:{gutter:10,nostroke:!1,axis:"0 1 0 0",symbol:"o",smooth:!0,axisystep:2*(l-1),axisxstep:n.length-1,axisymin:1,axisymax:l,grid:"0 1",dash:""},p.length>n.length&&(p=p.slice(0,n.length)),m=v.g.linechart(20,20,e,r,[n],[p],x).hover(w,z),m.symbols.attr({r:2}),m.lines.attr({stroke:f}),m.symbols.attr({stroke:f}),m.symbols.attr({fill:f}),m.axis.attr({stroke:"#f00"}),m.grid.attr({stroke:"#f00"}),m.grid.attr({"stroke-width":.25}),k=v.rect(e,r+31+10*c,20,8).attr({stroke:"none",fill:f}),k.chart=m,k.hidden=0,k.color=f,k.altcolor=d,k.mouseover(function(){this.attr({fill:this.altcolor}),this.text.attr(fontWeight("bold"))}),k.mouseout(function(){this.attr({fill:this.color}),this.text.attr(fontWeight("normal"))}),k.text=v.text(e-4,r+35+10*c,u).attr({"text-anchor":"end",fill:"#000"}),k.text.rect=k,k.text.mouseover(function(){this.rect.attr({fill:this.rect.altcolor}),this.attr(fontWeight("bold"))}),k.text.mouseout(function(){this.rect.attr({fill:this.rect.color}),this.attr(fontWeight("normal"))}),k.click(_),k.text.text=k.text,k.text.chart=k.chart,k.text.click(_))},uhf_channels=[14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],uhf_hi_channels=uhf_channels.concat([53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70]),vhf_hi_channels=[7,8,9,10,11,12,13,14],uhfChart=function(t,e,r,n,i,o,s,a,l){return gainChart(t,e,r,uhf_channels,n,i,o,s,a,l)},uhfHiChart=function(t,e,r,n,i,o,s,a,l){return gainChart(t,e,r,uhf_hi_channels,n,i,o,s,a,l)},vhfHiChart=function(t,e,r,n,i,o,s,a,l){return gainChart(t,e,r,vhf_hi_channels,n,i,o,s,a,l)},gainSwrChart=function(t,e,r,n,i,o,s,a,l,h){gainChart(t,e-40,r-40-10*Math.max(i.length,o.length),n,i,o,s,a,l,h)},AntennaHPattern=function(t,e,r,n,i,o,s){e=Math.max(100,e-20),this.x=e/2,this.y=this.x+(n.length>1?20:0)
for(var a,l,h,c,u,f,d=this,p=Raphael(t,e,e),g=[],m=0,k=Math.round(e/2-(n.length>1?35:25)),v=[],M=[k],b=[],w=[],z=0,_=360/((n[0][0].length-1)*(i+1)),$=p.set(),C=(Math.min,Math.max);m!=n.length;++m)for(w.push(1),a=0;a!=n[m].length;++a)g.push(n[m][a].maxValue())
for(h=C(Math.round(g.minValue()-3.5),0),l=Math.round(g.maxValue()+.5);l>=h;)v.push(l),l-=3
if(l>0&&2>=l)v.push(0)
else if(l>0&&5>=l)v.push(l),v.push(0)
else if(l>0){for(f=Math.round(l/5),f=Math.round(l/f-.5);l>=f;)v.push(l),l-=f
v.push(0)}else v.length>2&&v.pop(),v.push(0)
for(v.push(-5),v.push(-10),v.push(-20),v.push(-50),v.push(-1e3),c=v[0]<=12?.5:6/v[0],u=1-c,m=1;v[m]>0;++m)M.push(Math.round((c+u*v[m]/v[0])*M[0]))
M.push(Math.round(c*M[0])),M.push(Math.round(.75*c*M[0])),M.push(Math.round(.5*c*M[0])),M.push(Math.round(.25*c*M[0])),M.push(Math.round(.125*c*M[0])),M.push(0)
var V=function(t){var e=1
if(-1e3>t)return 0
for(;e<v.length&&!(t>v[e]);++e);return(M[e-1]-M[e])*(t-v[e])/(v[e-1]-v[e])+M[e]},B=function(){$.remove(),$.push(p.g.popup(this.x,this.y,this.value,null,3))},W=function(){$.remove()},S=function(t){var e,r,o,a,l,h=n[t][z],c=0,u="",f=0,x=0,g=(h[0],p.set()),m=s[t][0],k=function(t){e=V(h[c]),x=radians(f),o=d.x+Math.cos(x)*e,a=d.y-Math.sin(x)*e,u+=t+Math.round(100*o)/100+" "+Math.round(100*a)/100,r=p.circle(o,a,2).attr({stroke:m,fill:m}),r.value=f+" dg\n"+h[c],r.x=o,r.y=a,r.hover(B,W),f+=_,g.push(r)}
for(k("M"),l=r,c=1;c<h.length;++c)k("L")
if(i)for(c=h.length-2;c>0;--c)k("L")
return u+="Z",res=p.path(u),res.attr({stroke:m}).insertBefore(l),g.push(res),g},I=function(){z+=this.step,z>=r.length-1&&(z=r.length-1),d.draw()},L=function(){z-=this.step,0>z&&(z=0),d.draw()},A=function(){var t=this.mno
w[t]?(b[t].hide(),w[t]=0):(b[t].show(),w[t]=1),d.draw()},H=function(){var t,a,l,h,c=0,u=M,f=u.length-5,g=n[0][z],m="#000",k="#888",b="#888",_="#ccc",$="#fff",C="normal",V="bolder",B=function(){var t=this.mno,e=this
e.text.attr(fontWeight(V)),w[t]?e.attr({fill:b}):e.attr({fill:_})},W=function(){var t=this.mno,e=this
e.text.attr(fontWeight(C)),w[t]?e.attr({fill:s[t][1]}):e.attr({fill:$})}
if(n.length>1){for(c=0;c!=n.length;++c)g=n[c][z],h=p.rect(c*e/n.length,2,e/n.length,12).attr({stroke:"none"}),h.click(A),h.mno=c,w[c]?h.attr({fill:s[c][1]}):h.attr({fill:$}),h.text=p.text((c+.5)*e/n.length,8,o[c]),h.text.mno=c,h.text.click(A),h.text.btn=h,h.text.mouseover(function(){this.btn.onBtnOver()}),h.text.mouseout(function(){this.btn.onBtnOut()}),h.mouseover(B),h.mouseout(W),h.onBtnOver=B,h.onBtnOut=W,p.text((c+.5)*e/n.length,18,i?"F: "+g[0]+"dBi, B: "+g[g.length-1]+"dBi":"F: "+g[0]+"dBi, B: "+g[Math.round(g.length/2-.5)]+"dBi").attr(fontSize(9)),p.text((c+.5)*e/n.length,28,g.minValue()+" < dBi < "+g.maxValue()).attr(fontSize(9))
p.text(8,38,r[z]).attr({"text-anchor":"start"})}else p.text(10,e-18,g.minValue()+" < dBi < "+g.maxValue()).attr({"text-anchor":"start"}),p.text(0,e-8,i?"F: "+g[0]+"dBi, B: "+g[g.length-1]+"dBi":"F: "+g[0]+"dBi, B: "+g[Math.round(g.length/2-.5)]+"dBi").attr({"text-anchor":"start","font-size":9}),p.text(8,8,r[z]).attr({"text-anchor":"start"})
for(c=0;c!=u.length-1;++c)p.circle(d.x,d.y,u[c]).attr({stroke:"#000",fill:"none"}),p.text(d.x-10,d.y-u[c]+5,v[c])
for(c=0;360!=c;c+=5)l=radians(c),t=Math.cos(l),a=Math.sin(l),c%15?r_line(p,d.x+t*u[f],d.y+a*u[f],d.x+t*u[0],d.y+a*u[0]).attr({stroke:b}):(c%90?r_line(p,d.x+t*u[f+1],d.y+a*u[f+1],d.x+t*u[0],d.y+a*u[0]).attr({stroke:m}):r_line(p,d.x,d.y,d.x+t*u[0],d.y+a*u[0]).attr({stroke:m}),p.text(d.x+t*(u[0]+10),d.y-a*(u[0]+10),c))
x=e-50,y=e-15
var S=function(t,e,r,n,i){var o=p.rect(t,y,e,12),s=p.text(t+e/2,y+5,r)
o.attr({fill:k,stroke:"none"}),o.click(n),o.step=i,o.mouseover(function(){this.attr({fill:_}),this.txt.attr(fontWeight("bold"))}),o.mouseout(function(){this.attr({fill:k}),this.txt.attr(fontWeight("normal"))}),o.txt=s,s.attr({fill:k,stroke:m}),s.click(n),s.step=i,s.mouseover(function(){this.rect.attr({fill:_}),this.attr(fontWeight("bold"))}),s.mouseout(function(){this.rect.attr({fill:k}),this.attr(fontWeight("normal"))}),s.rect=o}
S(x-16,14,"<",L,1,k),S(x,14,">",I,1),S(x-37,19,"<<",L,5),S(x+16,19,">>",I,5),S(x-53,14,"|<",L,r.length),S(x+37,14,">|",I,r.length)},E=function(){for(var t=0;t!=n.length;++t)b[t]=S(t),w[t]||b[t].hide()}
d.draw=function(){p.clear(),H(),E()}},vhfHiFreqTitles=function(){for(var t=0,e=[];8!=t;++t)e.push(174+6*t+" Mhz")
return e},uhfFreqTitles=function(){for(var t=0,e=[];39!=t;++t)e.push(470+6*t+" Mhz")
return e},uhfHiFreqTitles=function(){for(var t=0,e=[];57!=t;++t)e.push(470+6*t+" Mhz")
return e},configureModelPatternTabs=function(){var t,e=$("#show_pattern"),r=$("#show_model"),n=$("#pattern"),i=$("#model"),o="selected",s=function(){$(this).hasClass(o)||(e.toggleClass(o),r.toggleClass(o),e.hasClass(o)?(n.show(),i.hide(),"Loading..."==n.html()&&(t=i.html(),t=t.replace("_r.html","_h.html"),n.html(t))):(i.show(),n.hide()))}
e.click(s),r.click(s),n.hide()},configureModelPatternTabsNoJQ=function(){var t,e=document,r=e.getElementById("show_pattern"),n=e.getElementById("show_model"),i=e.getElementById("pattern"),o=e.getElementById("model"),s="selected",a=function(){this.className!=s&&(r.className=r.className==s?"":s,n.className=n.className==s?"":s,r.className==s?(i.style.display="block",o.style.display="none","Loading..."==i.innerHTML&&(t=o.innerHTML,t=t.replace("_r.html","_h.html"),i.innerHTML=t)):(i.style.display="none",o.style.display="block"))}
r.onclick=a,n.onclick=a,i.style.display="none"},configureTabs=function(t){var e=$(t+" a"),r=[],n=[],i=[],o=-1,s="selected",a=function(){var t=0
if(!$(this).hasClass(s))for($(this).toggleClass(s),-1!==o&&(r[o].hide(),i[o].toggleClass(s));t!=i.length;++t)i[t].hasClass(s)&&(o=t,r[o].show(),"Loading..."==r[t].html()&&r[t].html(n[t]))}
e.each(function(){{var t=$(this),e=t.attr("href")
t.attr("title")}t.removeAttr("href"),"#"==e.charAt(0)?(i.length&&$(e).hide(),r.push($(e))):(t.attr("title",""),r.push($(title)),n.push("<object data='"+e+"' style='width:100%; height:100%'></object>"),$(title).html("Loading..."),i.length&&$(title).hide()),i.push(t),t.click(a),t.removeClass(s)}),i.length&&i[0].click()}