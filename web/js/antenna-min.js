if(!Array.prototype.indexOf){Array.prototype.indexOf=function(b){var a=this.length,c=Number(arguments[1])||0;c=(c<0)?Math.ceil(c):Math.floor(c);if(c<0){c+=a}for(;c<a;c++){if(c in this&&this[c]===b){return c}}return -1}}if(!Array.prototype.maxIndex){Array.prototype.maxIndex=function(){if(!this.length){return -1}var b=0,a=this.length,c=1;for(;c<a;++c){if(this[b]<this[c]){b=c}}return b}}if(!Array.prototype.minIndex){Array.prototype.minIndex=function(){if(!this.length){return -1}var c=0,a=this.length,b=1;for(;b<a;++b){if(this[c]>this[b]){c=b}}return c}}if(!Array.prototype.maxValue){Array.prototype.maxValue=function(){if(!this.length){return undefined}return this[this.maxIndex()]}}if(!Array.prototype.minValue){Array.prototype.minValue=function(){if(!this.length){return undefined}return this[this.minIndex()]}}function getClientWidth(){return document.compatMode==="CSS1Compat"&&!window.opera?document.documentElement.clientWidth:document.body.clientWidth}function getClientHeight(){return document.compatMode==="CSS1Compat"&&!window.opera?document.documentElement.clientHeight:document.body.clientHeight}function getInternetExplorerVersion(){var c=-1;if(navigator.appName==="Microsoft Internet Explorer"){var a=navigator.userAgent,b=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})");if(b.exec(a)!==null){c=parseFloat(RegExp.$1)}}return c}function r_line(e,b,d,a,c){return e.path("M"+b+" "+d+"L"+a+" "+c)}function radians(a){return Math.PI*a/180}function degrees(a){return a/Math.PI*180}var antennaGeometry=function(Y,Q,Z,M,j,E,a,F,d,ab){var c=Raphael(Y,Q,Z),K=Matrix.RotationX(radians(15)).x(Matrix.RotationY(radians(-60)).x($M([[0,1,0],[0,0,1],[1,0,0]]))),m=M,J=E?E:0,p=a?a:0,V=undefined,U=undefined,s=undefined,q=undefined,e=F?14:0,z=0,ae=0,N=(getInternetExplorerVersion()!==-1),ac="#fff",af=function(h){return Math.round(h*1000)+"mm"},r=function(h){return Math.round(h*10000)/10},C=function(h){return Math.round(h*10000)/10+"mm"},t=function(h){if(h%2){return[h,16]}h/=2;if(h%2){return[h,8]}h/=2;if(h%2){return[h,4]}h/=2;return[h,2]},o=function(h){var i=h<0?-Math.round(h/0.0015875):Math.round(h/0.0015875);if(i%16!==0){var ag=Math.abs(i%16),w=t(ag);return(h<0?"-":"")+Math.round(i/16-0.5)+" "+w[0]+"/"+w[1]+" in"}else{return(h<0?"-":"")+Math.round(i/16-0.5)+"in"}},L=function(ag){var h=ag<0?-Math.round(ag/0.0015875):Math.round(ag/0.0015875);if(h%16!==0){var w=Math.abs(h%16),i=t(w);return(ag<0?"-":"")+Math.round(h/16-0.5)+" "+i[0]+"/"+i[1]}else{return(ag<0?"-":"")+Math.round(h/16-0.5)}},A=function(al){var ag=0,ah=[];for(ag=0;ag!==al.length;ag++){var h=al[ag][0],am=al[ag].slice(1),w;if(am.length%6!==0){alert("Invalid geometry array - length="+am.length)}for(w=0;w!==am.length;w+=6){var an=$V(am.slice(w,w+3)),aj=$V(am.slice(w+3,w+6)),ak=an.subtract(aj),ai=ak.modulus();ah.push({color:h,pts:[an,aj],segment_selected:0,sselected:0,eselected:0,len:ai,names:[[af(ai),r(an.e(1))+","+r(an.e(2))+","+r(an.e(3)),r(aj.e(1))+","+r(aj.e(2))+","+r(aj.e(3))],[o(ai),L(an.e(1))+","+L(an.e(2))+","+L(an.e(3)),L(aj.e(1))+","+L(aj.e(2))+","+L(aj.e(3))]]})}}return ah},l=A(j),k=[],n=-1,d=d,I=[],X,b=Q/2+J,B=(Z+e)/2+p,O=this,f=function(){K=Matrix.RotationX(radians(15)).x(Matrix.RotationY(radians(-60)).x($M([[0,1,0],[0,0,1],[1,0,0]])));b=Q/2+J;B=(Z+e)/2+p;M=m;O.redraw()},R=function(h,ai,ag){if(h===0&&ai===0){return}if((z===0)==!ag){b+=h;B-=ai}else{var ah=0;if(s<40){ah=-ai;h=0;ai=0}else{if(s>Q-40){h=0}else{if(q<e+40){ai=0}}}if(h===0&&ai===0&&ah===0){return}var w=Math.sqrt(h*h+ai*ai+ah*ah)*Math.PI/Math.min(Q,Z),i=Matrix.Rotation(w,$V([-ai,h,ah]).toUnitVector());K=i.x(K)}O.redraw()},S="#f00",W=function(i){var h=this;if(z){h.attr({fill:S});z=0}else{h.attr({fill:ac});z=1}O.redraw()},G=c.set(),g="stroke-width",u="#b00",T="#0b0",ad="#00b",aa=function(){var ah=K.x(Vector.Zero(3)),ai=K.x(Vector.i),i=ah.e(1)*30,ag=-ah.e(2)*30,h=ai.e(1)*30,w=-ai.e(2)*30,aj="M"+i+" "+ag+"L"+h+" "+w;c.path(aj).translate(b,B).attr({stroke:u,stroke_width:1});h=i+(h-i)*1.25;w=ag+(w-ag)*1.25;c.text(h,w,"X").translate(b,B).attr({stroke:u,stroke_width:1});ai=K.x(Vector.j);h=ai.e(1)*30;w=-ai.e(2)*30;aj="M"+i+" "+ag+"L"+h+" "+w;c.path(aj).translate(b,B).attr({stroke:T,stroke_width:1});h=i+(h-i)*1.25;w=ag+(w-ag)*1.25;c.text(h,w,"Y").translate(b,B).attr({stroke:T,stroke_width:1});ai=K.x(Vector.k);h=ai.e(1)*30;w=-ai.e(2)*30;aj="M"+i+" "+ag+"L"+h+" "+w;c.path(aj).translate(b,B).attr({stroke:ad,stroke_width:1});h=i+(h-i)*1.25;w=ag+(w-ag)*1.25;c.text(h,w,"Z").translate(b,B).attr({stroke:ad,stroke_width:1})},H=function(){n=this.i;deselectAll();O.redraw()},D=function(){var h="http://clients.teksavvy.com/~nickm/help.html";rct=c.rect(Q-30,1,30,12,2);rct.attr({fill:"#fff",stroke:"none"});rct.click(function(){window.open(h)});rct.mouseover(function(){this.attr({fill:"#fd0"})});rct.mouseout(function(){this.attr({fill:"#fff"})});txt=c.text(Q-15,6,"Help").attr({"font-size":11});txt.click(function(){window.open(h)});txt.rect=rct;txt.mouseover(function(){this.rect.attr({fill:"#fd0"});this.attr({"font-weight":"bold"})});txt.mouseout(function(){this.rect.attr({fill:"#fff"});this.attr({"font-weight":"normal"})})},P=function(){if(!k.length){return}var w=d.length,ah,h,aj;for(ah=0;ah!==k.length;++ah){w+=k[ah][0].length}var ag=Math.min((Q-20)/(w+k.length+1),8),ai=(Q-ag*w)/2-30;c.text(ai+d.length*ag/2,e/2,d).attr({"font-size":11});ai+=(1+d.length)*ag;for(ah=0;ah!==k.length;++ah){if(ah===n){c.rect(ai,1,k[ah][0].length*ag,e-2).attr({fill:"#8ff",stroke:"none"})}else{aj=c.rect(ai,1,k[ah][0].length*ag,e-2);aj.attr({fill:"#fff",stroke:"none"});aj.mouseover(function(){this.attr({fill:"#ccc"})});aj.mouseout(function(){this.attr({fill:"#fff"})});aj.click(H);aj.i=ah}h=c.text(ai+k[ah][0].length*ag/2,e/2,k[ah][0]).attr({"font-size":11});if(ah!==n){h.i=ah;h.click(H);h.rect=aj;h.mouseover(function(){this.rect.attr({fill:"#ccc"});this.attr({"font-weight":"bold"})});h.mouseout(function(){this.rect.attr({fill:"#fff"});this.attr({"font-weight":"normal"})})}ai+=(1+k[ah][0].length)*ag}},v=function(i,h){return Math.atan2(i.cross(h).modulus(),i.dot(h))};angleBetween=function(i,h){var w=[i.pts[0].subtract(h.pts[0]).modulus(),i.pts[0].subtract(h.pts[1]).modulus(),i.pts[1].subtract(h.pts[0]).modulus(),i.pts[1].subtract(h.pts[1]).modulus()];mini=w.minIndex(),ang=0;if(mini==0){ang=v(i.pts[1].subtract(i.pts[0]),h.pts[1].subtract(h.pts[0]))}if(mini==1){ang=v(i.pts[1].subtract(i.pts[0]),h.pts[0].subtract(h.pts[1]))}if(mini==2){ang=v(i.pts[0].subtract(i.pts[1]),h.pts[1].subtract(h.pts[0]))}if(mini==3){ang=v(i.pts[0].subtract(i.pts[1]),h.pts[0].subtract(h.pts[1]))}return Math.round(10*degrees(ang))/10+"\u00B0"};drawInformation=function(aj,w){var ak=ae?o:C,i=0,am=[],h=[];X,xs=[],ys=[],zs=[],str="",count=0;if(!aj.length){c.text(Q/2-20,e+7,"Select elements for info. Double click to clear. Total len: "+ak(w)).attr({"font-size":11});return}for(X=0;X!==aj.length;++X){var an=aj[X],ai=an[0],ag=an[1],al=an[2],ah=I[ai][ag];if(al===0){h.push(ah);am.push(ah.pts[0]);am.push(ah.pts[1]);i+=ah.len}else{am.push(ah.pts[al-1])}}for(X=0;X!==am.length;++X){if(xs.indexOf(am[X].e(1))===-1){xs.push(am[X].e(1))}if(ys.indexOf(am[X].e(2))===-1){ys.push(am[X].e(2))}if(zs.indexOf(am[X].e(3))===-1){zs.push(am[X].e(3))}}if(xs.length===1){str+=" x: "+ak(xs[0]);++count}else{if(xs.length===2){str+=" \u0394x: "+ak(Math.abs(xs[0]-xs[1]));++count}}if(ys.length===1){str+=" y: "+ak(ys[0]);++count}else{if(ys.length===2){str+=" \u0394y: "+ak(Math.abs(ys[0]-ys[1]));++count}}if(zs.length===1){str+=" z: "+ak(zs[0]);++count}else{if(zs.length===2){str+=" \u0394z: "+ak(Math.abs(zs[0]-zs[1]));++count}}if(h.length==2&&count<3){str+=" \u2221"+angleBetween(h[0],h[1]);++count}if(i>0){str+=" Total len: "+ak(i);++count}c.text(Q/2-20,e+7,"Selection info ("+aj.length+"): "+str).attr({"font-size":11})},deselectAll=function(){for(var w=0;w!==I.length;++w){var ag=I[w];for(var h=0;h!==ag.length;++h){ag[h].selected=0;ag[h].sselected=0;ag[h].eselected=0}}},popup=function(){G.remove();G.push(c.g.popup(this.x,this.y,this.value,null,3))},popdown=function(){G.remove()},segclick=function(){var h=this.si;I[h[0]][h[1]].selected=!I[h[0]][h[1]].selected;O.redraw()},startclick=function(){var h=this.si;I[h[0]][h[1]].sselected=!I[h[0]][h[1]].sselected;O.redraw()},endclick=function(){var h=this.si;I[h[0]][h[1]].eselected=!I[h[0]][h[1]].eselected;O.redraw()};if(F){n=0;for(X=0;X!==F.length;++X){k.push([F[X][0],A(F[X][1])])}}this.redraw=function(){G.remove();c.clear();var ao=ae?1:0,at=[],am=0,ak,ar=c.rect(1,1,Q-2,Z-2,10).attr({fill:ac,stroke:"none"}),w,av,an,ag=0,aj,ai=[],aq,al,h,ah,au,ap;ar.drag(function(ax,aw){var i=ax-V,ay=-aw+U;V=ax;U=aw;R(i,ay,ar.mb)},function(i,ax,aw){s=i;q=ax;V=0;U=0;if(aw.which==undefined){ar.mb=(aw.button==4)}else{ar.mb=(aw.which==2)}},function(){});ar.dblclick(function(){deselectAll();O.redraw()});I=[l];if(n!==-1){I.push(k[n][1])}for(am=0;am!==I.length;++am){w=I[am];for(ak=0;ak!==w.length;ak++){aj=w[ak];ag+=aj.len;av=K.x(aj.pts[0]);an=K.x(aj.pts[1]);at.push({z:Math.min(av.e(3),an.e(3)),x1:av.e(1)*M+b,y1:-av.e(2)*M+B,x2:an.e(1)*M+b,y2:-an.e(2)*M+B,sindex:[am,ak]})}}at.sort(function(aw,i){return aw.z-i.z});if(!N){for(am=0;am!==at.length;++am){aj=at[am];aq="M"+aj.x1+" "+aj.y1+"L"+aj.x2+" "+aj.y2;al=aj.sindex;h=c.path(aq).attr({stroke:ac,"stroke-width":11});w=I[al[0]];ak=al[1];h.value=w[ak].names[ao][0];h.x=(aj.x1+aj.x2)/2;h.y=(aj.y1+aj.y2)/2;h.si=al;h.hover(popup,popdown);h.click(segclick);ap=c.circle(aj.x1,aj.y1,7).attr({stroke:ac,fill:ac});ap.value=w[ak].names[ao][1];ap.x=aj.x1;ap.y=aj.y1;ap.si=al;ap.hover(popup,popdown);ap.click(startclick);ap=c.circle(aj.x2,aj.y2,7).attr({stroke:ac,fill:ac});ap.value=w[ak].names[ao][2];ap.x=aj.x2;ap.y=aj.y2;ap.si=al;ap.hover(popup,popdown);ap.click(endclick)}}aa();for(am=0;am!==at.length;++am){aj=at[am];aq="M"+aj.x1+" "+aj.y1+"L"+aj.x2+" "+aj.y2;al=aj.sindex;ak=al[1];w=I[al[0]];ah=w[ak].color;au=(w[ak].selected?"#f0f":ah);h=c.path(aq).attr({stroke:au,"stroke-width":3});h.value=w[ak].names[ao][0];h.x=(aj.x1+aj.x2)/2;h.y=(aj.y1+aj.y2)/2;h.si=al;if(w[ak].selected){ai.push([al[0],ak,0])}h.hover(popup,popdown);h.click(segclick);au=(w[ak].sselected?"#f0f":ah);ap=c.circle(aj.x1,aj.y1,3).attr({stroke:au,fill:au});ap.value=w[ak].names[ao][1];ap.x=aj.x1;ap.y=aj.y1;ap.si=al;if(w[ak].sselected){ai.push([al[0],ak,1])}ap.hover(popup,popdown);ap.click(startclick);au=(w[ak].eselected?"#f0f":ah);ap=c.circle(aj.x2,aj.y2,3).attr({stroke:au,fill:au});ap.value=w[ak].names[ao][2];ap.x=aj.x2;ap.y=aj.y2;ap.si=al;if(w[ak].eselected){ai.push([al[0],ak,2])}ap.hover(popup,popdown);ap.click(endclick)}drawInformation(ai,ag);D();P();c.circle(15,Z-15,10).attr({fill:ac}).click(function(i){M=M*1.1;O.redraw()});c.g.plus(15,Z-15,10).attr({fill:"#000"}).click(function(i){M=M*1.1;O.redraw()});c.circle(40,Z-15,10).attr({fill:ac}).click(function(i){M=M/1.1;O.redraw()});c.g.line(40,Z-15,10).attr({fill:"#000"}).click(function(i){M=M/1.1;O.redraw()});c.g.label(80,Z-15,"Reset").click(function(i){deselectAll();f()});c.g.label(150,Z-15,ae?"Switch to MM":"Switch to IN").click(function(i){ae=!ae;O.redraw()});ap=c.circle(Q-24,Z-15,14).attr({stroke:"#000"}).click(W);c.g.label(Q-86,Z-15,"F").click(function(i){K=$M([[0,1,0],[0,0,1],[1,0,0]]);O.redraw()});c.g.label(Q-69,Z-15,"L").click(function(i){K=$M([[1,0,0],[0,0,1],[0,-1,0]]);O.redraw()});c.g.label(Q-51,Z-15,"T").click(function(i){K=$M([[0,1,0],[-1,0,0],[0,0,1]]);O.redraw()});c.path("M15.999,4.308c1.229,0.001,2.403,0.214,3.515,0.57L18.634,6.4h6.247l-1.562-2.706L21.758,0.99l-0.822,1.425c-1.54-0.563-3.2-0.878-4.936-0.878c-7.991,0-14.468,6.477-14.468,14.468c0,3.317,1.128,6.364,3.005,8.805l2.2-1.689c-1.518-1.973-2.431-4.435-2.436-7.115C4.312,9.545,9.539,4.318,15.999,4.308zM27.463,7.203l-2.2,1.69c1.518,1.972,2.431,4.433,2.435,7.114c-0.011,6.46-5.238,11.687-11.698,11.698c-1.145-0.002-2.24-0.188-3.284-0.499l0.828-1.432H7.297l1.561,2.704l1.562,2.707l0.871-1.511c1.477,0.514,3.058,0.801,4.709,0.802c7.992-0.002,14.468-6.479,14.47-14.47C30.468,12.689,29.339,9.643,27.463,7.203z").attr({fill:"#000"}).scale(3/4).translate(Q-40,Z-31).click(W);if(z){ap.attr({fill:"#f00",stroke:"#000"})}else{ap.attr({fill:ac,stroke:"#000"})}}};var gainChart=function(q,o,B,b,m,u,d,e,g,F){var s=Raphael(q,o+40,B+40+10*Math.max(m.length,u.length)),p=s.set(),A,z,c,v,n,E,l,C,a,k;if(F){s.text(o/2,10,F).attr({"font-size":14})}s.g.txtattr.font="10px 'Fontin Sans', Fontin-Sans, sans-serif";var D=function(){if(p){p.remove()}p.push(s.g.popup(this.x,this.y,this.value,null,3))};var t=function(){if(p){p.remove()}};var f=function(){if(this.hidden){this.hidden=0;this.text.attr({fill:"#000"});this.chart.lines.show();this.chart.symbols.show();this.chart.dots.show()}else{this.hidden=1;this.text.attr({fill:"#ccc"});this.chart.lines.hide();this.chart.symbols.hide();this.chart.dots.hide()}};for(A=m.length;A!==0;){--A;c=m[A][0];v=m[A][1];n=u[A][1];E=m[A].slice(2);if(!E.length){continue}if(A){l={gutter:10,nostroke:false,axis:"0 0 0 0",symbol:"o",smooth:true,axisystep:(e-d)*2,axisxstep:b.length-1,axisymin:d,axisymax:e,dash:""}}else{l={gutter:10,nostroke:false,axis:"0 0 1 1",symbol:"o",smooth:true,axisystep:(e-d)*2,axisxstep:b.length-1,axisymin:d,axisymax:e,grid:"5 2",dash:""}}if(E.length>b.length){E=E.slice(0,b.length)}C=s.g.linechart(20,20,o,B,[b],[E],l).hover(D,t);C.symbols.attr({r:2});C.lines.attr({stroke:v});C.symbols.attr({stroke:v});C.symbols.attr({fill:v});C.grid.attr({"stroke-width":0.25});k=s.rect(20,B+31+10*A,20,8).attr({stroke:"none",fill:v});k.chart=C;k.hidden=0;k.color=v;k.altcolor=n;k.mouseover(function(){this.attr({fill:this.altcolor});this.text.attr({"font-weight":"bold"})});k.mouseout(function(){this.attr({fill:this.color});this.text.attr({"font-weight":"normal"})});k.text=s.text(44,B+35+10*A,c).attr({"text-anchor":"start"});k.text.rect=k;k.text.mouseover(function(){this.rect.attr({fill:this.rect.altcolor});this.attr({"font-weight":"bold"})});k.text.mouseout(function(){this.rect.attr({fill:this.rect.color});this.attr({"font-weight":"normal"})});k.text.text=k.text;k.text.chart=k.chart;k.click(f);k.text.click(f)}for(A=u.length;A!==0;){--A;c=u[A][0];v=u[A][1];n=m[A][1];E=u[A].slice(2);if(!E.length){continue}if(A){l={gutter:10,nostroke:false,axis:"0 0 0 0",symbol:"o",smooth:true,axisystep:(g-1)*2,axisxstep:b.length-1,axisymin:1,axisymax:g,dash:""}}else{l={gutter:10,nostroke:false,axis:"0 1 0 0",symbol:"o",smooth:true,axisystep:(g-1)*2,axisxstep:b.length-1,axisymin:1,axisymax:g,grid:"0 1",dash:""}}if(E.length>b.length){E=E.slice(0,b.length)}a=s.g.linechart(20,20,o,B,[b],[E],l).hover(D,t);a.symbols.attr({r:2});a.lines.attr({stroke:v});a.symbols.attr({stroke:v});a.symbols.attr({fill:v});a.axis.attr({stroke:"#f00"});a.grid.attr({stroke:"#f00"});a.grid.attr({"stroke-width":0.25});k=s.rect(o,B+31+10*A,20,8).attr({stroke:"none",fill:v});k.chart=a;k.hidden=0;k.color=v;k.altcolor=n;k.mouseover(function(){this.attr({fill:this.altcolor});this.text.attr({"font-weight":"bold"})});k.mouseout(function(){this.attr({fill:this.color});this.text.attr({"font-weight":"normal"})});k.text=s.text(o-4,B+35+10*A,c).attr({"text-anchor":"end",fill:"#000"});k.text.rect=k;k.text.mouseover(function(){this.rect.attr({fill:this.rect.altcolor});this.attr({"font-weight":"bold"})});k.text.mouseout(function(){this.rect.attr({fill:this.rect.color});this.attr({"font-weight":"normal"})});k.click(f);k.text.text=k.text;k.text.chart=k.chart;k.text.click(f)}};var uhf_channels=[14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52];var uhf_hi_channels=uhf_channels.concat([53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70]);var vhf_hi_channels=[7,8,9,10,11,12,13,14];var uhfChart=function(e,g,c,i,d,a,b,j,f){return gainChart(e,g,c,uhf_channels,i,d,a,b,j,f)},uhfHiChart=function(e,g,c,i,d,a,b,j,f){return gainChart(e,g,c,uhf_hi_channels,i,d,a,b,j,f)},vhfHiChart=function(e,g,c,i,d,a,b,j,f){return gainChart(e,g,c,vhf_hi_channels,i,d,a,b,j,f)};var gainSwrChart=function(f,i,c,d,k,e,a,b,j,g){gainChart(f,i-40,c-40-10*Math.max(k.length,e.length),d,k,e,a,b,j,g)};var AntennaHPattern=function(v,w,b,J,s,t,p){w=Math.max(100,w-20);var l=this,h=Raphael(v,w,w),d=[],G=0,F,I,g,f=Math.round(w/2-(J.length>1?35:25)),m,E=[],z=[f],r,C=[],a=[],B=0,e=360/((J[0][0].length-1)*(s+1)),u=h.set();l.x=w/2;l.y=l.x+(J.length>1?20:0);for(;G!=J.length;++G){a.push(1);for(F=0;F!=J[G].length;++F){d.push(J[G][F].maxValue())}}g=Math.max(Math.round(d.minValue()-3.5),0);I=Math.round(d.maxValue()+0.5);while(I>=g){E.push(I);I-=3}if(I>0&&I<=2){E.push(0)}else{if(I>0&&I<=5){E.push(I);E.push(0)}else{if(I>0){var k=Math.round(I/5);k=Math.round(I/k-0.5);while(I>=k){E.push(I);I-=k}E.push(0)}else{if(E.length>2){E.pop()}E.push(0)}}}E.push(-5);E.push(-10);E.push(-20);E.push(-50);E.push(-1000);if(E[0]<=12){m=0.5}else{m=0.5*12/E[0]}r=1-m;for(G=1;E[G]>0;++G){z.push(Math.round((m+r*E[G]/E[0])*z[0]))}z.push(Math.round(m*z[0]));z.push(Math.round(m*0.75*z[0]));z.push(Math.round(m*0.5*z[0]));z.push(Math.round(m*0.25*z[0]));z.push(Math.round(m*0.125*z[0]));z.push(0);var q=function(M){var j=1;if(M<-1000){return 0}for(;j<E.length;++j){if(M>E[j]){break}}return(z[j-1]-z[j])*(M-E[j])/(E[j-1]-E[j])+z[j]},c=function(){u.remove();u.push(h.g.popup(this.x,this.y,this.value,null,3))},L=function(){u.remove()},D=function(S){var O=J[S][B],Q=0,Z="",X=0,j=0,R=O[0],U,N,W,V,T=h.set(),M,Y=p[S][0],P=function(i){U=q(O[Q]);j=radians(X);W=l.x+Math.cos(j)*U;V=l.y-Math.sin(j)*U;Z+=i+Math.round(W*100)/100+" "+Math.round(V*100)/100;N=h.circle(W,V,2).attr({stroke:Y,fill:Y});N.value=X+" dg\n"+O[Q];N.x=W;N.y=V;N.hover(c,L);X+=e;T.push(N)};P("M");M=N;for(Q=1;Q<O.length;++Q){P("L")}if(s){for(Q=O.length-2;Q>0;--Q){P("L")}}Z+="Z";res=h.path(Z);res.attr({stroke:Y}).insertBefore(M);T.push(res);return T},o=function(){B+=this.step;if(B>=b.length-1){B=b.length-1}l.draw()},K=function(){B-=this.step;if(B<0){B=0}l.draw()},A=function(){var i=this.mno;if(a[i]){C[i].hide();a[i]=0}else{C[i].show();a[i]=1}l.draw()},n=function(){var Z=0,V=z,aa=V.length-5,N,j,ab,W=J[0][B],U="#000",O="#888",M="#888",Y="#ccc",T,S="#fff",ac="normal",X="bolder",P=function(){var i=this.mno,ad=this;ad.text.attr({"font-weight":X});if(a[i]){ad.attr({fill:M})}else{ad.attr({fill:Y})}},Q=function(){var i=this.mno,ad=this;ad.text.attr({"font-weight":ac});if(a[i]){ad.attr({fill:p[i][1]})}else{ad.attr({fill:S})}};if(J.length>1){for(Z=0;Z!=J.length;++Z){W=J[Z][B];T=h.rect(Z*w/J.length,2,w/J.length,12).attr({stroke:"none"});T.click(A);T.mno=Z;if(a[Z]){T.attr({fill:p[Z][1]})}else{T.attr({fill:S})}T.text=h.text((Z+0.5)*w/J.length,8,t[Z]);T.text.mno=Z;T.text.click(A);T.text.btn=T;T.text.mouseover(function(){this.btn.onBtnOver()});T.text.mouseout(function(){this.btn.onBtnOut()});T.mouseover(P);T.mouseout(Q);T.onBtnOver=P;T.onBtnOut=Q;h.text((Z+0.5)*w/J.length,18,s?("F: "+W[0]+"dBi, B: "+W[W.length-1]+"dBi"):("F: "+W[0]+"dBi, B: "+W[Math.round(W.length/2-0.5)]+"dBi")).attr({"font-size":9});h.text((Z+0.5)*w/J.length,28,W.minValue()+" < dBi < "+W.maxValue()).attr({"font-size":9})}h.text(8,38,b[B]).attr({"text-anchor":"start"})}else{h.text(10,w-18,W.minValue()+" < dBi < "+W.maxValue()).attr({"text-anchor":"start"});h.text(0,w-8,s?("F: "+W[0]+"dBi, B: "+W[W.length-1]+"dBi"):("F: "+W[0]+"dBi, B: "+W[Math.round(W.length/2-0.5)]+"dBi")).attr({"text-anchor":"start","font-size":9});h.text(8,8,b[B]).attr({"text-anchor":"start"})}for(Z=0;Z!=V.length-1;++Z){h.circle(l.x,l.y,V[Z]).attr({stroke:"#000",fill:"none"});h.text(l.x-10,l.y-V[Z]+5,E[Z])}for(Z=0;Z!=360;Z+=5){ab=radians(Z);N=Math.cos(ab);j=Math.sin(ab);if(Z%15){r_line(h,l.x+N*V[aa],l.y+j*V[aa],l.x+N*V[0],l.y+j*V[0]).attr({stroke:M})}else{if(Z%90){r_line(h,l.x+N*V[aa+1],l.y+j*V[aa+1],l.x+N*V[0],l.y+j*V[0]).attr({stroke:U})}else{r_line(h,l.x,l.y,l.x+N*V[0],l.y+j*V[0]).attr({stroke:U})}h.text(l.x+N*(V[0]+10),l.y-j*(V[0]+10),Z)}}x=w-50;y=w-15;var R=function(i,ae,ah,ai,ag){var af=h.rect(i,y,ae,12),ad=h.text(i+ae/2,y+5,ah);af.attr({fill:O,stroke:"none"});af.click(ai);af.step=ag;af.mouseover(function(){this.attr({fill:Y});this.txt.attr({"font-weight":"bold"})});af.mouseout(function(){this.attr({fill:O});this.txt.attr({"font-weight":"normal"})});af.txt=ad;ad.attr({fill:O,stroke:U});ad.click(ai);ad.step=ag;ad.mouseover(function(){this.rect.attr({fill:Y});this.attr({"font-weight":"bold"})});ad.mouseout(function(){this.rect.attr({fill:O});this.attr({"font-weight":"normal"})});ad.rect=af};R(x-16,14,"<",K,1,O);R(x,14,">",o,1);R(x-37,19,"<<",K,5);R(x+16,19,">>",o,5);R(x-53,14,"|<",K,b.length);R(x+37,14,">|",o,b.length)},H=function(){var j=0;for(;j!=J.length;++j){C[j]=D(j);if(!a[j]){C[j].hide()}}};l.draw=function(){h.clear();n();H()}};function vhfHiFreqTitles(){var b=0,a=[];for(;b!=8;++b){a.push((174+b*6)+" Mhz")}return a}function uhfFreqTitles(){var b=0,a=[];for(;b!=39;++b){a.push((470+b*6)+" Mhz")}return a}function uhfHiFreqTitles(){var b=0,a=[];for(;b!=57;++b){a.push((470+b*6)+" Mhz")}return a}var configureModelPatternTabs=function(){var g=$("#show_pattern"),c=$("#show_model"),a=$("#pattern"),f=$("#model"),b="selected",e,d=function(){if($(this).hasClass(b)){return}g.toggleClass(b);c.toggleClass(b);if(g.hasClass(b)){a.show();f.hide();if(a.html()=="Loading..."){e=f.html();e=e.replace("_r.html","_h.html");a.html(e)}}else{f.show();a.hide()}};g.click(d);c.click(d);a.hide()};var configureTabs=function(e){var h=$(e+" a"),b=[],a=[],i=[],g=-1,c="selected",f,d=function(){var j=0;if($(this).hasClass(c)){return}$(this).toggleClass(c);if(g!==-1){b[g].hide();i[g].toggleClass(c)}for(;j!=i.length;++j){if(i[j].hasClass(c)){g=j;b[g].show();if(b[j].html()=="Loading..."){b[j].html(a[j])}}}};h.each(function(k){var m=$(this),j=m.attr("href"),l=m.attr("title");m.removeAttr("href");if(j.charAt(0)=="#"){if(i.length){$(j).hide()}b.push($(j))}else{m.attr("title","");b.push($(title));a.push("<object data='"+j+"' style='width:100%; height:100%'></object>");$(title).html("Loading...");if(i.length){$(title).hide()}}i.push(m);m.click(d);m.removeClass(c)});if(i.length){i[0].click()}};
